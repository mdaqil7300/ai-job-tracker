<div class="page">
    <header class="header">
        <div>
            <h1>AI Helper</h1>
            <p>Generate interview content in seconds üöÄ</p>
        </div>

        <a class="btn" routerLink="/jobs">‚Üê Back</a>
    </header>

    <!-- Extract Job from Email -->
    <section class="card">
        <h2>0) Paste Email ‚Üí Extract Job</h2>

        <form [formGroup]="extractForm" (ngSubmit)="onExtractJob()">
            <div class="field">
                <label>Paste application email text *</label>
                <textarea class="big-text" formControlName="emailText"
                    placeholder="Paste your job application confirmation email here..."></textarea>

                <small class="hint">
                    Example: ‚ÄúThanks for applying to Accenture for Angular Developer role‚Ä¶‚Äù
                </small>
            </div>

            <div class="actions">
                <button class="btn primary" type="submit" [disabled]="loadingExtract()">
                    {{ loadingExtract() ? 'Extracting...' : 'Extract Job' }}
                </button>
            </div>
        </form>

        <div *ngIf="extractedJob()" class="output">
            <div class="output-header">
                <h3>Extracted Job</h3>
                <button class="btn" (click)="saveExtractedJob()">Save as Job</button>
            </div>

            <div class="preview">
                <p><b>Company:</b> {{ extractedJob()!.companyName }}</p>
                <p><b>Role:</b> {{ extractedJob()!.role }}</p>
                <p><b>Status:</b> {{ extractedJob()!.status }}</p>
            </div>
        </div>
    </section>

    <!-- Follow-up Email -->
    <section class="card">
        <h2>1) Follow-up Email Generator</h2>

        <form class="grid" [formGroup]="emailForm" (ngSubmit)="onGenerateEmail()">
            <div class="field">
                <label>Company *</label>
                <input formControlName="companyName" placeholder="e.g. Accenture" />
            </div>

            <div class="field">
                <label>Role *</label>
                <input formControlName="role" placeholder="e.g. Angular Developer" />
            </div>

            <div class="field">
                <label>Last Interview Date *</label>
                <input type="date" formControlName="lastInterviewDate" />
            </div>

            <div class="actions">
                <button class="btn primary" type="submit" [disabled]="loadingEmail()">
                    {{ loadingEmail() ? 'Generating...' : 'Generate Email' }}
                </button>
            </div>
        </form>

        <div *ngIf="generatedEmail()" class="output">
            <div class="output-header">
                <h3>Generated Email</h3>
                <button class="btn" (click)="copyEmail()">Copy</button>
            </div>
            <pre>{{ generatedEmail() }}</pre>
        </div>
    </section>

    <!-- Interview Questions -->
    <section class="card">
        <h2>2) Interview Questions Generator</h2>

        <form class="grid" [formGroup]="questionsForm" (ngSubmit)="onGenerateQuestions()">
            <div class="field">
                <label>Role *</label>
                <input formControlName="role" placeholder="e.g. Frontend Developer" />
            </div>

            <div class="field">
                <label>Tech Stack *</label>
                <input formControlName="techStack" placeholder="Angular, RxJS, NgRx..." />
            </div>

            <div class="actions">
                <button class="btn primary" type="submit" [disabled]="loadingQuestions()">
                    {{ loadingQuestions() ? 'Generating...' : 'Generate Questions' }}
                </button>
            </div>
        </form>

        <div *ngIf="generatedQuestions().length > 0" class="output">
            <div class="output-header">
                <h3>Generated Questions</h3>
                <button class="btn" (click)="copyQuestions()">Copy</button>
            </div>

            <ul>
                <li *ngFor="let q of generatedQuestions()">{{ q }}</li>
            </ul>
        </div>
    </section>
</div>